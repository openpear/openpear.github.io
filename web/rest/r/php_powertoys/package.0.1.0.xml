<?xml version="1.0" encoding="UTF-8"?>
<package packagerversion="1.7.2" version="2.0" xmlns="http://pear.php.net/dtd/package-2.0" xmlns:tasks="http://pear.php.net/dtd/tasks-1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://pear.php.net/dtd/tasks-1.0     http://pear.php.net/dtd/tasks-1.0.xsd     http://pear.php.net/dtd/package-2.0     http://pear.php.net/dtd/package-2.0.xsd">
 <name>PHP_PowerToys</name>
 <channel>openpear.org</channel>
 <summary>密かに暖めてきたネタですが
なんか、Openpear_Utilに先を越された感じに(^^;
ですが、こちらのコンセプトは
汎用ではなく、あったらいいなというような
PHPのかゆい部分に手が届くライブラリです。


因みに命名ですが
Microsoft社が開発した公式のWindowsカスタマイズツール
Microsoft PowerToys for Windows
に由来しています


各メソッドについての説明


*getInstance
これは、クラスファクトリーそのままです。
ファイル名とクラス名が一緒であれば
そのままインスタンスとして取得してくる事が可能です。

*getPearI
PEARライブラリ向けのクラスファクトリーです。
使い方としては、いつも皆様がpearコマンドを使って
インストールする風な感じでOKです(例:Net_POP3)

*getPear
同じくPEARライブラリ向けのクラスファクトリーです。
ですが、これは上記と違いファイル名を指定して
インスタンスを持ってくるメソッドです。

*arrayKeyReplace
連想配列のキー名を、順序を保ったまま
置き換えるためのメソッドです。
因みに、違うキーで同じデータを入れても
新たに配列が生成されてしまうだけです。
仕事で必要になったため、PHP関数リファレンスを
覗いてもこのようなメソッドがなかったため
作成いたしました。

*is_file_ex
Ethnaに影響を受けました。
通常のis_fileではInclude_pathを
見に行かないので、作成しました(コピペではありません)
因みにMail_Mailerクラスでも実装しています。

*save_var_dump
var_dumpした結果はprint_rと違い
通常はファイルとして保存する事が出来ません。
それを保存出来るように拡張したメソッドです。

*checkBom
UTF-8なデータに相性の悪いBOMがないかチェックします。

*removeBom
UTF-8からBOMを削除して返します。

*iopen
GDでそのまま画像を開こうとすると
識別してからimagecreatefrom(jpeg|gif|png)
という形で選ばなければなりません。
これは非常に厄介な問題なので
指定された画像の形式を自動識別して
リソース情報を返すメソッドです
命名はfopenという関数があるので、それに習いました。
但し、このメソッドはやや不安定なところがあるので注意が必要です(^^; orz

*print_r_ex
変数の中身を展開するprint_r関数ですが
ブラウザ上で見ると非常に見辛いです。
これは、改行コードで単にブラウザに沿ってないだけの
問題ですが、それをブラウザからでも確認しやすくします。

*objectClone
PHP5からは「&amp;」を用いた参照代入をしなくても
シャローコピーになるようになりました。
もしディープコピーがしたい場合にはcloneを用いる
必要がありますが、深い階層の場合はcloneでは
事足りない事があるそうです、このメソッドでは
その部分を補います。

*file_get_contents_ex
場合によっては、危険なメソッドになるかもしれませんが
php.iniの設定で「allow_url_fopen」が
offにされていても、外部のコンテンツを取りにいけます。
因みに「allow_url_fopen」はini_setで値を変更する事は出来ません。</summary>
 <description>密かに暖めてきたネタですが
なんか、Openpear_Utilに先を越された感じに(^^;
ですが、こちらのコンセプトは
汎用ではなく、あったらいいなというような
PHPのかゆい部分に手が届くライブラリです。


因みに命名ですが
Microsoft社が開発した公式のWindowsカスタマイズツール
Microsoft PowerToys for Windows
に由来しています


各メソッドについての説明


*getInstance
これは、クラスファクトリーそのままです。
ファイル名とクラス名が一緒であれば
そのままインスタンスとして取得してくる事が可能です。

*getPearI
PEARライブラリ向けのクラスファクトリーです。
使い方としては、いつも皆様がpearコマンドを使って
インストールする風な感じでOKです(例:Net_POP3)

*getPear
同じくPEARライブラリ向けのクラスファクトリーです。
ですが、これは上記と違いファイル名を指定して
インスタンスを持ってくるメソッドです。

*arrayKeyReplace
連想配列のキー名を、順序を保ったまま
置き換えるためのメソッドです。
因みに、違うキーで同じデータを入れても
新たに配列が生成されてしまうだけです。
仕事で必要になったため、PHP関数リファレンスを
覗いてもこのようなメソッドがなかったため
作成いたしました。

*is_file_ex
Ethnaに影響を受けました。
通常のis_fileではInclude_pathを
見に行かないので、作成しました(コピペではありません)
因みにMail_Mailerクラスでも実装しています。

*save_var_dump
var_dumpした結果はprint_rと違い
通常はファイルとして保存する事が出来ません。
それを保存出来るように拡張したメソッドです。

*checkBom
UTF-8なデータに相性の悪いBOMがないかチェックします。

*removeBom
UTF-8からBOMを削除して返します。

*iopen
GDでそのまま画像を開こうとすると
識別してからimagecreatefrom(jpeg|gif|png)
という形で選ばなければなりません。
これは非常に厄介な問題なので
指定された画像の形式を自動識別して
リソース情報を返すメソッドです
命名はfopenという関数があるので、それに習いました。
但し、このメソッドはやや不安定なところがあるので注意が必要です(^^; orz

*print_r_ex
変数の中身を展開するprint_r関数ですが
ブラウザ上で見ると非常に見辛いです。
これは、改行コードで単にブラウザに沿ってないだけの
問題ですが、それをブラウザからでも確認しやすくします。

*objectClone
PHP5からは「&amp;」を用いた参照代入をしなくても
シャローコピーになるようになりました。
もしディープコピーがしたい場合にはcloneを用いる
必要がありますが、深い階層の場合はcloneでは
事足りない事があるそうです、このメソッドでは
その部分を補います。

*file_get_contents_ex
場合によっては、危険なメソッドになるかもしれませんが
php.iniの設定で「allow_url_fopen」が
offにされていても、外部のコンテンツを取りにいけます。
因みに「allow_url_fopen」はini_setで値を変更する事は出来ません。</description>
 <lead>
  <name>FreeBSE</name>
  <user>FreeBSE</user>
  <email>today_next@hotmail.com</email>
  <active>yes</active>
 </lead>
 <date>2009-08-06</date>
 <time>04:23:10</time>
 <version>
  <release>0.1.0</release>
  <api>0.1.0</api>
 </version>
 <stability>
  <release>stable</release>
  <api>stable</api>
 </stability>
 <license uri="http://creativecommons.org/licenses/BSD/">New BSD Licence</license>
 <notes>------------------------------------------------------------------------
r1079 | FreeBSE | 2009-08-06 04:19:20 -0700 (Thu, 06 Aug 2009) | 4 lines

?\227?\130?\181?\227?\131?\179?\227?\131?\151?\227?\131?\171?\227?\131?\149?\227?\130?\161?\227?\130?\164?\227?\131?\171?\229?\135?\186?\230?\157?\165?\227?\129?\159?\239?\188?\188(^o^)?\239?\188?\143
?\227?\130?\181?\227?\131?\179?\227?\131?\151?\227?\131?\171?\227?\129?\167?\231?\148?\187?\229?\131?\143?\227?\129?\174?\231?\181?\182?\229?\175?\190?\227?\131?\145?\227?\130?\185?\227?\130?\146?\232?\170?\164?\233?\173?\148?\229?\140?\150?\227?\129?\151?\227?\129?\166?\227?\129?\132?\227?\129?\159?\227?\129?\174?\227?\130?\146?\228?\191?\174?\230?\173?\163
saveVarDump?\227?\129?\175var_dump?\227?\129?\174?\230?\139?\161?\229?\188?\181?\227?\129?\170?\227?\129?\174?\227?\129?\167PHP?\229?\159?\186?\230?\186?\150?\227?\129?\171?\229?\144?\136?\227?\130?\143?\227?\129?\155save_var_dump?\227?\129?\171?\230?\148?\185?\231?\167?\176
GD?\227?\129?\140?\227?\129?\170?\227?\129?\139?\227?\129?\163?\227?\129?\159?\230?\153?\130?\227?\129?\174?\227?\130?\168?\227?\131?\169?\227?\131?\188?\227?\131?\143?\227?\131?\179?\227?\131?\137?\227?\131?\170?\227?\131?\179?\227?\130?\176?\227?\130?\146?\232?\191?\189?\229?\138?\160(Fatal?\229?\155?\158?\233?\129?\191?\233?\152?\187?\230?\173?\162)
------------------------------------------------------------------------
r1066 | FreeBSE | 2009-08-05 04:26:30 -0700 (Wed, 05 Aug 2009) | 3 lines

PHP4?\227?\129?\167?\227?\130?\130?\228?\189?\191?\227?\129?\136?\227?\130?\139?\227?\130?\136?\227?\129?\134?\227?\129?\171?\228?\191?\174?\230?\173?\163
Openpear?\228?\184?\138?\227?\129?\174?\227?\131?\135?\227?\130?\163?\227?\131?\172?\227?\130?\175?\227?\131?\136?\227?\131?\170?\227?\129?\174?\229?\160?\180?\230?\137?\128?\228?\191?\174?\230?\173?\163
?\227?\130?\179?\227?\131?\161?\227?\131?\179?\227?\131?\136?\227?\129?\161?\227?\130?\135?\227?\129?\163?\227?\129?\168?\227?\129?\160?\227?\129?\145?\228?\191?\174?\230?\173?\163
------------------------------------------------------------------------
r1064 | FreeBSE | 2009-08-05 04:19:01 -0700 (Wed, 05 Aug 2009) | 1 line

?\231?\167?\187?\229?\139?\149
------------------------------------------------------------------------
r1063 | FreeBSE | 2009-08-05 04:18:30 -0700 (Wed, 05 Aug 2009) | 1 line

?\231?\167?\187?\229?\139?\149
------------------------------------------------------------------------
r1060 | openpear | 2009-08-04 02:49:48 -0700 (Tue, 04 Aug 2009) | 1 line

[Create Base Directory] PHP_PowerToys
------------------------------------------------------------------------</notes>
 <contents>
  <dir baseinstalldir="/PHP" name="/">
   <file baseinstalldir="/PHP" md5sum="785d6f80bd794a86f1d54ef19edf7bd4" name="sample/sample.gif" role="data" />
   <file baseinstalldir="/PHP" md5sum="9c29e43ff8a84407d425d1116ecba69f" name="sample/sample.jpg" role="data" />
   <file baseinstalldir="/PHP" md5sum="d424b6a6b92fdbebb19be3431ed73925" name="sample/sample.php" role="php" />
   <file baseinstalldir="/PHP" md5sum="02fdd73031594b0ad121581c33a8b071" name="sample/sample.png" role="data" />
   <file baseinstalldir="/PHP" md5sum="7da3551a570d87df9b11d5ac7d1a4f07" name="sample/sample.txt" role="data" />
   <file baseinstalldir="/PHP" md5sum="3daa39d9a4038986303b71f6cfb46ee6" name="PowerToys.php" role="php" />
  </dir>
 </contents>
 <dependencies>
  <required>
   <php>
    <min>4.3.3</min>
   </php>
   <pearinstaller>
    <min>1.4.0</min>
   </pearinstaller>
  </required>
 </dependencies>
 <phprelease />
 <changelog>
  <release>
   <version>
    <release>0.1.0</release>
    <api>0.1.0</api>
   </version>
   <stability>
    <release>stable</release>
    <api>stable</api>
   </stability>
   <date>2009-08-06</date>
   <license uri="http://creativecommons.org/licenses/BSD/">New BSD Licence</license>
   <notes>------------------------------------------------------------------------
r1079 | FreeBSE | 2009-08-06 04:19:20 -0700 (Thu, 06 Aug 2009) | 4 lines

?\227?\130?\181?\227?\131?\179?\227?\131?\151?\227?\131?\171?\227?\131?\149?\227?\130?\161?\227?\130?\164?\227?\131?\171?\229?\135?\186?\230?\157?\165?\227?\129?\159?\239?\188?\188(^o^)?\239?\188?\143
?\227?\130?\181?\227?\131?\179?\227?\131?\151?\227?\131?\171?\227?\129?\167?\231?\148?\187?\229?\131?\143?\227?\129?\174?\231?\181?\182?\229?\175?\190?\227?\131?\145?\227?\130?\185?\227?\130?\146?\232?\170?\164?\233?\173?\148?\229?\140?\150?\227?\129?\151?\227?\129?\166?\227?\129?\132?\227?\129?\159?\227?\129?\174?\227?\130?\146?\228?\191?\174?\230?\173?\163
saveVarDump?\227?\129?\175var_dump?\227?\129?\174?\230?\139?\161?\229?\188?\181?\227?\129?\170?\227?\129?\174?\227?\129?\167PHP?\229?\159?\186?\230?\186?\150?\227?\129?\171?\229?\144?\136?\227?\130?\143?\227?\129?\155save_var_dump?\227?\129?\171?\230?\148?\185?\231?\167?\176
GD?\227?\129?\140?\227?\129?\170?\227?\129?\139?\227?\129?\163?\227?\129?\159?\230?\153?\130?\227?\129?\174?\227?\130?\168?\227?\131?\169?\227?\131?\188?\227?\131?\143?\227?\131?\179?\227?\131?\137?\227?\131?\170?\227?\131?\179?\227?\130?\176?\227?\130?\146?\232?\191?\189?\229?\138?\160(Fatal?\229?\155?\158?\233?\129?\191?\233?\152?\187?\230?\173?\162)
------------------------------------------------------------------------
r1066 | FreeBSE | 2009-08-05 04:26:30 -0700 (Wed, 05 Aug 2009) | 3 lines

PHP4?\227?\129?\167?\227?\130?\130?\228?\189?\191?\227?\129?\136?\227?\130?\139?\227?\130?\136?\227?\129?\134?\227?\129?\171?\228?\191?\174?\230?\173?\163
Openpear?\228?\184?\138?\227?\129?\174?\227?\131?\135?\227?\130?\163?\227?\131?\172?\227?\130?\175?\227?\131?\136?\227?\131?\170?\227?\129?\174?\229?\160?\180?\230?\137?\128?\228?\191?\174?\230?\173?\163
?\227?\130?\179?\227?\131?\161?\227?\131?\179?\227?\131?\136?\227?\129?\161?\227?\130?\135?\227?\129?\163?\227?\129?\168?\227?\129?\160?\227?\129?\145?\228?\191?\174?\230?\173?\163
------------------------------------------------------------------------
r1064 | FreeBSE | 2009-08-05 04:19:01 -0700 (Wed, 05 Aug 2009) | 1 line

?\231?\167?\187?\229?\139?\149
------------------------------------------------------------------------
r1063 | FreeBSE | 2009-08-05 04:18:30 -0700 (Wed, 05 Aug 2009) | 1 line

?\231?\167?\187?\229?\139?\149
------------------------------------------------------------------------
r1060 | openpear | 2009-08-04 02:49:48 -0700 (Tue, 04 Aug 2009) | 1 line

[Create Base Directory] PHP_PowerToys
------------------------------------------------------------------------</notes>
  </release>
 </changelog>
</package>
